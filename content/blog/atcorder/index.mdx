---
title: RailsアプリケーションをCircleCIを用いてECSに自動デプロイ
date: "2022-03-01"
description: "Atcorderの動的計画法の基本問題をRubyで解いて解説してみました。"
image_url: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/heroku/heroku-original-wordmark.svg"
tags: ["Rails", "Heroku", "技術"]
---

#### ももクロ天国

```ruby
class Admin::UserSessionsController < Admin::BaseController
skip_before_action :require_login, only: %i[new create]
skip_before_action :check_admin, only: %i[new create]
layout 'layouts/admin_login'

def new; end

def create
@user = login(params[:email], params[:password])
if @user
redirect_to admin_root_path, success: t('.success')
else
flash.now[:danger] = t('.fail')
render :new
end
end

def destroy
  logout
  redirect_to admin_login_path, success: t('.success')
end
```

ここで下記を実行

```

$ rails db:migrate

```

`User`モデルに`enum`を追加します

<div class="gatsby-code-title">
  <span>app/controllers/admin/user_sessions_controller.rb</span>
</div>

```ruby
class Admin::UserSessionsController < Admin::BaseController
  skip_before_action :require_login, only: %i[new create]
  skip_before_action :check_admin, only: %i[new create]
  layout 'layouts/admin_login'

  def new; end

  def create
    @user = login(params[:email], params[:password])
    if @user
      redirect_to admin_root_path, success: t('.success')
    else
      flash.now[:danger] = t('.fail')
      render :new
    end
  end

  def destroy
    logout
    redirect_to admin_login_path, success: t('.success')
  end
end
```

**aa**は**ももクロ**
